{% extends 'base.html' %}
{% load django_bootstrap5 %}

{% block title %}Edit Profile — AuthProfile{% endblock %}

{% block content %}

<a href="{% url 'accounts:dashboard' %}" class="back-link mb-4 d-inline-flex">
    <i class="bi bi-arrow-left"></i> Back to Dashboard
</a>

<div class="row g-4 mt-1">
    <!-- Left: Profile Preview -->
    <div class="col-lg-4">
        <div class="card-custom no-lift">
            <div class="card-body text-center">
                <div class="profile-avatar mx-auto mb-3" style="width:80px;height:80px;font-size:2rem;">
                    {{ user.first_name|first|default:user.username|first|upper }}
                </div>
                <h5 class="mb-1">{{ user.get_full_name|default:user.username }}</h5>
                <p style="color:var(--color-text-mute);font-size:0.875rem;margin-bottom:1.25rem;">
                    @{{ user.username }}
                </p>

                <div class="text-start">
                    <div class="detail-row">
                        <span class="detail-icon"><i class="bi bi-envelope"></i></span>
                        <span class="detail-label">Email</span>
                        <span class="detail-value">{{ user.email|default:"—" }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-icon"><i class="bi bi-geo-alt"></i></span>
                        <span class="detail-label">Location</span>
                        <span class="detail-value">{{ user.profile.location|default:"—" }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-icon"><i class="bi bi-telephone"></i></span>
                        <span class="detail-label">Phone</span>
                        <span class="detail-value">{{ user.profile.phone|default:"—" }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-icon"><i class="bi bi-chat-text"></i></span>
                        <span class="detail-label">Bio</span>
                        <span class="detail-value">{{ user.profile.bio|default:"—"|truncatewords:12 }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right: Edit Form -->
    <div class="col-lg-8">
        <div class="card-custom no-lift">
            <div class="card-body">
                <div class="section-header">
                    <h5><i class="bi bi-pencil-square"></i> Edit Profile</h5>
                    <span class="line"></span>
                </div>

                <form method="post">
                    {% csrf_token %}

                    <div class="form-section-title">
                        <i class="bi bi-person"></i> Account Information
                    </div>
                    {% bootstrap_form user_form %}

                    <div class="form-section-title mt-4">
                        <i class="bi bi-card-text"></i> Profile Details
                    </div>
                    {% bootstrap_form profile_form %}

                    <div class="d-grid mt-4">
                        <button type="submit" class="btn btn-accent">
                            <i class="bi bi-check-lg"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}
